<div class="container">
  <h3>Welcome to your dashboard, <%= current_user.name %></h3>

  <h1 class="text-center">My Bookings</h1>




  <div class="main">
    <% @bookings.each do |booking| %>

        <div class="card-trip" data-controller="toggle">
          <%= link_to horse_path(booking.horse) do %>
            <%= cl_image_tag booking.horse.photos.first.key, height: 150, width: 250, crop: :fill %>
          <% end %>
            <div>
              <div>
                <h2><%= booking.horse.name %></h2>
                <p>Start date: <%= booking.start_date %></p>
                <p>End date: <%= booking.end_date %></p>

                <i class="fa-solid fa-pen" data-action="click->toggle#open"></i>
                <div class="d-none" data-toggle-target="form">
                  <%= render "bookings/form", horse: booking.horse, booking: booking %>
                </div>
                <%= link_to booking_path(booking), data: {turbo_method: :delete, turbo_confirm: "Are you sure?"}  do %>
                  <i class="fa-solid fa-trash"></i>
                <% end %>
              </div>
            </div>
        </div>
    <% end %>
  </div>

  <div class="mt-3"><h1 class="text-center">My Horses</h1></div>
    <div class="d-flex justify-content-between mt-3 booking">
      <% @horses.each do |horse| %>
        <div>
          <%= link_to horse_path(horse) do %>
            <%= cl_image_tag horse.photos.first.key, class: "image-card" %>
          <% end %>
          <div>
            <p><%= horse.name %></p>
              <div>
                <%= link_to horse_path(horse) do %>
                  <p class="btn text-white">Pending (<%= horse.bookings.where(confirmed: false).count %>)</p>
                <% end %>
              </div>
          </div>
        </div>
      <% end %>
    </div>
  </div>
</div>
